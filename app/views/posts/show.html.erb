<div class="container">
  <p id="notice"><%= notice %></p>

   <h3>Category: <%= @post.category.name %></h3>
  <p>
    <strong>Title:</strong>
    <%= @post.title %>
  </p>

  <p>
    <strong>Body:</strong>
    <%= @post.rich_body %>
  </p>

  <% @post.photos.each do |photo| %>
    <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, :quality=>"auto", :fetch_format=>:auto %>
  <% end %>

  <div class='text-right'>
    <div class='badge badge-primary text-wrap'>
      <i><%=@post.status %> and created by <%=@post.owner.nickname %></i>
    </div>
  </div>


  <h4>Reviews</h4>
  <% if @post.reviews.empty? %>
    <p>Be the first to let a review</p>
  <% else %>
    <ul class="list-group">
      <% @post.reviews.each do |review| %>
        <li class="list-group-item d-flex justify-content-between align-items-center mt-2">
          <span class="badge badge-primary badge-pill">
            <% counter = 0 %>
            <% 5.times do %>
              <i class="fa <%= review.rating > counter ? 'fa-star' : 'fa-star-o' %>"></i>
              <% counter += 1 %>
            <% end %>
          </span>
          <%= review.content %>
        </li>
        <i>by <%= review.user.nickname  %></i>
      <% end %>
    </ul>
  <% end %>

  <%= render "reviews/new", post: @post, review: @review %>

<div class='mt-2' ml-2>
  <% if policy(@post).edit? %>
    <%= link_to 'Edit', edit_post_path(@post), class: "btn btn-outline-primary" %> |
  <% end %>
  <% if policy(@post).destroy? %>
    <%= link_to 'Delete', post_path(@post), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %> |
  <% end %>
    <%= link_to 'Back', root_path, class: 'btn btn-secondary' %>
  </div>
</div>
